<% @title = 'Schedule • ' + @league.name + ' • League Hero' %>
<% set_meta_tags :site => @title,
  :canonical => request.original_url,
  :author => 'League Hero',
  :copyright => '&copy; 2016 League Hero',
  :description => "-",
  :keywords => ['league', 'schedule', 'teams', 'scheduling', 'recent news'],
  :reverse => true,
  :og => {
    :title          => @title,
    :type           => 'website',
    :url            => request.original_url,
    :image          => '-',
    :description    => "-",
    :site_name      => 'League Hero',
  },
  :twitter => {
    :card           => 'summary',
    :site           => '@getleaguehero',
    :title          => @title,
    :description    => "-",
    :creator        => '@getleaguehero',
    :image          => '-',
  }
%>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <%= render :partial => 'layouts/toolbar' %>
      <% if @games.present? %>
        <div class="games-toolbar">
          <h3>Schedule</h3>
          <nav class="gt-months">
            <% if !@game_months.blank? %>
              <% @game_months.each do |month| %>
              <%= link_to month, schedule_path(month: month), class: if month == @current_month_name then "active" end, id: month  %>
              <% end %>
            <% end %>
            <% if current_user %>
              <%= link_to 'Delete All', games_destroy_all_path, class: "destroy-games", :data => {:confirm => 'Are you sure?'}, :method => :delete %>
              <%= link_to 'Add Game', new_game_path, class: "add-game" %>
            <% end %>
          </nav>
        </div>
      <% else %>
        <% if current_user %>
          <div class="hero-create-schedule">
            <h3>Let's Create a Schedule!</h3>
            <p>Oops, it looks like you haven't added any games to your schedule. Use <strong>Scheduling Hero&trade;</strong> to auto generate a schedule based on preferences or manually create a schedule by individually adding games.</p>
            <%= link_to 'Generate Schedule', games_generator_options_path, class: "btn btn-primary-outline" %>
            <%= link_to 'Add Game', new_game_path, class: "btn btn-secondary-outline" %>
          </div>
        <% else %>
          <div class="hero-create-schedule">
            <h3>Schedule</h3>
            <p>Oops, it doesn't look like any games have been added to the <%= @league.name %> league schedule yet.</p>
          </div>
        <% end %>
      <% end %>
      <% if @current_games.present? %>
        <table class="table teams_table">
          <thead>
            <tr>
              <th>Home Team</th>
              <th>Away Team</th>
              <th>Date / Time</th>
              <th>Location</th>
              <th>Score</th>
              <% if current_user %>
                <th></th>
                <th></th>
              <% end %>
            </tr>
          </thead>
          <tbody>
            <% @current_games.each do |game|%>
              <tr>
                <td><a href="/teams/<%= Team.find(game.team_one).id %>"><%= Team.find(game.team_one).name %></a></td>
                <td><a href="/teams/<%= Team.find(game.team_two).id %>"><%= Team.find(game.team_two).name %></a></td>
                <td><%= game.date %> at <%= game.time %></td>
                <td><%= game.location %></td>
                <td><% if game.winner_score && game.loser_score %><%= game.winner_score %> - <%= game.loser_score %><% end %></td>
                <% if current_user %>
                  <td><%= link_to('Edit', edit_game_path(:id => game.id)) %></td>
                  <td><%= link_to "Delete", game_path(:id => game.id), :confirm => 'Are you sure?', :method => :delete %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>
    </div>
  </div>
</div>
